# Diary.ru saver

## Что это
Это инструмент для получения локальной копии своего бложика. 
## Зачем это
После смены владельца у ресурса diary.ru очень стало неспокойно. Привычные кнопки пропадают, возможностей всё меньше, да и сайт работает всё медленнее. Ситуация, что в один день сайт просто перестанет отвечать, похоронив всё на свете, уже не кажется такой уж фантастической. А с учетом, что у многих пользователей бложики ведутся аж с времён, когда доллар был по 30, а телефоны отличались дизайном, потерять записи за n-цать лет будет очень грустно.
## Для кого это
Для всех, включая тех, кто далек от IT, программирования и т.д. Вам не нужно знать какие-то языки программирования, чтобы воспользоваться им. Просто нажмите на кнопки по порядку. Они подписаны. Это не сложно. 
## Подготовка, установка и запуск
### Установка python
Если у Вас Windows 7 или новее, 64 разрядная (а она скорее всего именно такая), просто скачайте [вот этот](https://www.python.org/ftp/python/3.8.10/python-3.8.10-amd64.exe) установщик.
Если у вас почему-то 32-х разрядная установите [вот этот](https://www.python.org/ftp/python/3.8.10/python-3.8.10.exe).
Обязательно поставьте галочку (1), а потом смело жмите Install Now (2)
![image](https://github.com/user-attachments/assets/64640b73-f2b4-408e-8e9f-c0ec810b26b2)
### Скачивание инструмента
Чтобы скачать инструмент себе, перейдите на страницу с инструментом в [GitHub](https://github.com/Uk141800/diary.ru_saver) и нажмите зеленую Code (3), а потом скачать Zip архивом (4).
![image](https://github.com/user-attachments/assets/3469c583-3aa1-4feb-b26d-58e47b5687c2)
Распаковываем в удобное для Вас место.
### Установка редактора Cookies и сохрание в файл
Чтобы скачать не только лишь открытые для всех посты, но и все закрытые, нужно сделать это от Вашего имени. Для этого мы сохраним cookies в файл.
Устанавливаем расширение [Редактор Cookie](https://chromewebstore.google.com/detail/ookdjilphngeeeghgngjabigmpepanpl).
Переходим на сайт diary.ru, входим в свой профиль и затем открываем расширение (5), жмем экспорт (6) и еще раз экспорт, но уже ниже (7). Сохраняем файл с именем diary.ru.json в распакованную папку.
![image](https://github.com/user-attachments/assets/29650791-d50e-4451-a210-0ba0de9a659f)
### Проверяем
Проверим результат. У Вас должна получиться папка, в папке должны быть папка templates, run.bat, diary.ru.json, requirements.txt, main.py. При этом у main.py должна быть иконка python.

Есть? Идем дальше.
### Запуск инструмента и скачивание
Дважды кликаем на run.bat.

Если появились ошибки, прочитайте их и там будет написано, что пошло не так.

Если ошибок нет, вводим адрес своего бложика, например https://906.diary.ru и жмем энтер.

Из-за того, что сайт ограничивает минимальное время между запросами, это займёт некоторое время. Просто расслабьтесь и не заходите на сайт некоторое время.

...PROFIT!
## Что на выходе?
На выходе у нас появится папка с нашим адресом. Если ввести адрес, как в примере, то появится папка 906. Внутри будет много файлов, Вам нужен index.html. Запустите его.

Меню слева позволит Вам перемещаться по страницам. Каждая страница - все посты за этот месяц.
![bandicam 2024-08-21 13-54-27-211](https://github.com/user-attachments/assets/6670da31-eab0-4d64-a515-e4499865e70d)

## Todo и планы
Так как время течет и всё меняется, в будущем будет добавлена возможность скачивать не только текст, но и локально сохранять картинки. Чтобы было меньше случаев, когда есть пост, в посте картинка, а сайт, на котором лежала картинка уже недоступен.

Копирование дизайна, который сейчас у пользователя. Пока не уверен, но постараюсь.

Изменение подхода. Сначала выбрать все годы, потом для каждого года найти все ссылки на дни и сложить это в список. А потом уже по списку проходиться бесконечным циклом. Это позволит, например повторить запрос, если сайт вернет какую-то из ошибок и посчитать и отобразить хоть какой-то ЕТА. 
