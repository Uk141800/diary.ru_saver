# Diary.ru saver

## Что это
Это инструмент для получения локальной копии своего бложика. 
## Зачем это
После смены владельца у ресурса diary.ru очень стало неспокойно. Привычные кнопки пропадают, возможностей всё меньше, да и сайт работает всё медленнее. Ситуация, что в один день сайт просто перестанет отвечать, похоронив всё на свете, уже не кажется такой уж фантастической. А с учетом, что у многих пользователей бложики ведутся аж с времён, когда доллар был по 30, а телефоны отличались дизайном, потерять записи за n-цать лет будет очень грустно.
## Для кого это
Для всех, включая тех, кто далек от IT, программирования и т.д. Вам не нужно знать какие-то языки программирования, чтобы воспользоваться им. Просто нажмите на кнопки по порядку. Они подписаны. Это не сложно. 
## Подготовка, установка и запуск, если Вы не знаете питон или не хотите заморачиваться.
### Скачивание инструмента
Вы можете зайти на страницу с проектом https://github.com/Uk141800/diary.ru_saver и нажать на зеленую кнопку Code (1), а потом - Download ZIP (2). Скачается архив с исходным кодом, а в папке dist будет программа.
![image](https://github.com/user-attachments/assets/8828e812-d531-46af-b6c1-1216daaae4b0)
Но качать всё - не обязательно. Можно зайти по ссылке https://github.com/Uk141800/diary.ru_saver/blob/master/dist/main.exe и кнопкой "Download raw file" (3) скачать только приложение.
![image](https://github.com/user-attachments/assets/5677c80c-c7be-49e8-be5b-d39f1878de7c)
Перенесите в удобное для Вас место
### Установка редактора Cookies и сохрание в файл
Чтобы скачать не только лишь открытые для всех посты, но и все закрытые, нужно сделать это от Вашего имени. Для этого мы сохраним cookies в файл.
Устанавливаем расширение [Редактор Cookie](https://chromewebstore.google.com/detail/ookdjilphngeeeghgngjabigmpepanpl) и устанавливаем его (4).
![image](https://github.com/user-attachments/assets/615f9a23-4687-49ab-b93f-9ec687687936)
Переходим на сайт diary.ru, входим в свой профиль и затем открываем расширение (5), жмем экспорт (6) и еще раз экспорт, но уже ниже (7). Сохраняем файл с именем diary.ru.json в распакованную папку.
![image](https://github.com/user-attachments/assets/29650791-d50e-4451-a210-0ba0de9a659f)
### Проверяем
Проверим результат. У Вас должна получиться папка, в папке должны diary.ru.json и main.exe.
Есть? Идем дальше.
### Запуск инструмента и скачивание
Дважды кликаем на main.exe.
Если появились ошибки, прочитайте их и там будет написано, что пошло не так.
Если ошибок нет, вводим адрес своего бложика, например https://906.diary.ru и жмем энтер.
Из-за того, что сайт ограничивает минимальное время между запросами, это займёт некоторое время. Просто расслабьтесь и не заходите на сайт некоторое время. Дневник за 16 лет, с ~1500 дней с постами скачивается за полтора часа. 7 лет и ~300 дней с постами - 20 минут.
![image](https://github.com/user-attachments/assets/8ece6dad-e12b-4c45-a49e-aa706e846648)

...PROFIT!
## Что на выходе?
На выходе у нас появится папка с нашим адресом. Если ввести адрес, как в примере, то появится папка 906. Внутри будет много файлов, Вам нужен index.html. Запустите его.

Меню слева позволит Вам перемещаться по страницам. Каждая страница - все посты за этот месяц.
![bandicam 2024-08-21 13-54-27-211](https://github.com/user-attachments/assets/6670da31-eab0-4d64-a515-e4499865e70d)

## Если Вы не хотите запускать готовый ехе
Можно собрать самостоятельно при помощи команды
```
pyinstaller --onefile --add-data "page.html;." --icon "ico64.ico" main.py
```
Или просто установить всё из requirements.txt и затем
```
python main.py
```
Работать будет точно также.

## Для контрибьюторов. Если хотите помочь.
Так как время течет и всё меняется, было бы классно скачивать не только лишь посты, но и локально сохранять картинки. Чтобы было меньше случаев, когда есть пост, в посте картинка, а сайт, на котором лежала картинка уже недоступен.

Копирование дизайна, который сейчас у пользователя. Пока не уверен как, но в теории - поправить шаблон, чтобы id и style были как в оригинале и копировать пользовательские файлы со стилями.

Сохранение заодно и в sqlite3 базу. *Не знаю, точно, зачем, но чем-то задним чувствую, что надо.* (с)
